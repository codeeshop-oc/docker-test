(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"2fdf":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("q-ajax-bar",{ref:"bar",staticClass:"bg-rev",attrs:{position:"top",size:"5px","skip-hijack":""}}),i("div",{staticClass:"container px-0 main-content"},[i("Stories"),i("div",{staticClass:"row q-pt-xs"},[i("main",{staticClass:"col col-xl-6 order-xl-2 col-lg-12 order-lg-1 col-md-12 col-sm-12 col-12"},[i("ul",{staticClass:"ui-block q-px-xs q-mb-none primary-border",staticStyle:{"justify-content":"space-around",display:"flex",position:"sticky",top:"70px","z-index":"10"}},e._l(e.topmenus_extras,(function(t,s){return i("li",{key:t.value,staticClass:"top-tab",class:{"text-rev":e.active_key==t.value},on:{click:function(s){e.active_key!=t.value&&e.isActiveTopMenu(1,t.value,1)}}},[i("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s(t.name))])])})),0),i("div",{staticClass:"q-mt-xs"},[i("CreatePosts",{attrs:{show_close_btn:!0}})],1),i("q-infinite-scroll",{ref:"newsfeedScroll",attrs:{offset:250},on:{load:e.onLoad}},[i("div",{attrs:{id:"newsfeed-items-grid"}},[0==e.newsfeed.length?i("div",e._m(0),0):e._e(),e._l(e.newsfeed,(function(t,s){return i("div",{key:t.id_post+s},[e._l(e.rev_post_arr,(function(t,r){return"undefined"!=typeof e.rev_post_arr&&e.rev_post_arr.length?i("div",[s==t?i("div",[Array.isArray(e.rev_posts[r])?i("RevPosts",{attrs:{post:e.rev_posts[r]}}):e._e()],1):e._e()]):e._e()})),s==e.ad_index?i("AdShow",{attrs:{running_ads:e.running_ads,posts:e.newsfeed,i:"i"}}):e._e(),i("keep-alive",[i("PostsCard",{attrs:{post:t,isEdit:!0,isEnabled:!0},on:{"update:pin_post":e.update_pin_post,"update:key":e.updateNewsfeedKey}})],1)],2)}))],2)])],1),i("aside",{staticClass:"col col-xl-3 order-xl-1 col-lg-6 order-lg-2 col-md-6 col-sm-6 col-12"},[i("div",{staticClass:"q-mb-sm"},[i("div",{staticClass:"widget w-wethear",staticStyle:{padding:"0"}},[i("a",{attrs:{href:"https://apps.apple.com/us/app/rev-stickers/id1466172432",target:"_blank"}},[i("img",{staticClass:"rounded",attrs:{src:"img/ads/ad-left-1.png"}})])])]),i("FollowSuggestions"),i("FeaturedMembers")],1),i("aside",{staticClass:"col col-xl-3 order-xl-3 col-lg-6 order-lg-3 col-md-6 col-sm-6 col-12"},[i("div",{staticClass:"q-mb-sm",on:{click:function(){return e.$router.push("/ads-manager")}}},[i("img",{staticClass:"rounded",attrs:{src:s("aec4"),alt:"logo"}})]),i("div",{staticClass:"q-mb-sm"},[i("a",{staticClass:"r-link",attrs:{href:"https://www.paypal.me/revolutionusa",target:"_blank",rel:"noopener noreferrer"},on:{mouseover:function(t){return e.hover("contribution-ads","iconcontribution-ads",t)},mouseout:function(t){return e.unhover("contribution-ads","iconcontribution-ads",t)}}},[i("img",{ref:"iconcontribution-ads",attrs:{src:"/img/icons/primary/common/contribution-ads.png",alt:"Rev Contribution"}})])]),i("News",{attrs:{revNews:e.revNews}})],1)])],1)],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return e._l(e.rev_posts,(function(t,i){return s("div",{key:i},[Array.isArray(t)?s("RevPosts",{attrs:{post:t}}):e._e()],1)}))}],o=(s("caad"),s("ddb0"),s("2f62")),a=s("5a20"),n=s("b35e"),d=s("51eb"),l=s("ce42"),c=s("7a6b"),u=s("64c1"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.c_ads?s("div",{staticClass:"advertisment-rev ui-block q-px-xs"},[s("div",{staticClass:"q-mt-sm"},[s("div",{staticClass:"text-bold",staticStyle:{"font-size":"12px"}},[e._v("REV Advertisment")]),s("div",{staticClass:"no_observer",attrs:{"data-adindex":e.c_ads.id_ads}},["promote-post"==e.c_ads.ads_type?s("div",[s("div",{staticClass:"q-pa-xs text-p text-bold featured-title"},[e._v("Featured Post")]),s("PostsCard",{attrs:{post:e.c_ads.post,is_ad:!0,isEdit:!0,isEnabled:!0},on:{"update:pin_post":e.update_pin_post,"update:key":e.updateNewsfeedKey,ads_clicked:function(t){return e.onCreateAdInsight({id_ads:e.c_ads.id_ads,total_click:1})}}})],1):"promote-profile"==e.c_ads.ads_type?s("div",{staticClass:"w-100",on:{click:function(t){return e.onCreateAdInsight({id_ads:e.c_ads.id_ads,total_click:1})}}},[s("div",{staticClass:"q-pa-xs text-p text-bold featured-title"},[e._v("Featured Profile")]),1==JSON.parse(e.c_ads.about_ad).id?s("div",[s("ProfilePreview1",{attrs:{user:e.c_ads.user}})],1):2==JSON.parse(e.c_ads.about_ad).id?s("div",[s("ProfilePreview2",{attrs:{user:e.c_ads.user}})],1):3==JSON.parse(e.c_ads.about_ad).id?s("div",[s("ProfilePreview3",{attrs:{user:e.c_ads.user}})],1):e._e()]):e._e(),"promote-website"==e.c_ads.ads_type?s("div",{on:{click:function(t){return e.onCreateAdInsight({id_ads:e.c_ads.id_ads,total_click:1})}}},[s("div",{staticClass:"q-pa-xs text-p text-bold featured-title"},[e._v("Featured Website")]),s("div",{staticStyle:{"max-height":"250px","overflow-y":"scroll"}},[s("div",{staticClass:"q-pa-sm text-rev"},[e._v(e._s(JSON.parse(e.c_ads.about_ad).link))]),e.preview_details?s("VuePreview",{attrs:{preview_details:e.preview_details}}):e._e()],1)]):e._e()])])]):e._e()},_=[],h=s("70b8"),g=s("92d0"),f=s("bda3");const v={created:function(){window.onCreateAdInsight=this.onCreateAdInsight},methods:{addElementObserver(e=0){animateFrame((e=>{e?e+=500:e=1,document.querySelector("[data-adindex]")?this.running_ads.map((e=>{this.setTheObserver(e.id_ads)})):e<5e3&&this.addElementObserver(e)}),e)},setTheObserver(e){const t=new IntersectionObserver(s,{root:null,threshold:1});function s(e,t){e.forEach((e=>{e.isIntersecting&&window.onCreateAdInsight({id_ads:e.target.dataset.adindex,impression:1})}))}document.querySelector('[data-adindex="'+e+'"]')&&(t.observe(document.querySelector('[data-adindex="'+e+'"]')),logger("log","set observer : "+e))}}};var m=v,y={name:"AdShow",mixins:[a["a"],m],data(){return{}},props:{running_ads:{required:!0},posts:{required:!0},i:{required:!0}},computed:{c_ads(){let e;return e=this.running_ads.length>0&&this.running_ads[Math.random()*this.running_ads.length|0],e}},components:{ProfilePreview1:h["a"],ProfilePreview2:g["a"],ProfilePreview3:f["a"],PostsCard:u["a"]},mounted(){},methods:{...Object(o["b"])("adsManagement",["createAdInsight"]),updateNewsfeedKey(e){this.c_ads.post[e.key]=e.value},onCreateAdInsight(e){this.createAdInsight(e).then((e=>{})).catch((e=>{}))}}},w=y,b=s("2877"),P=Object(b["a"])(w,p,_,!1,null,null,null),S=P.exports,E=s("21a0"),k=s("df68"),C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("SureDialog",{attrs:{openDialog:e.prompt_delete_story},on:{"update:value":function(t){return e.openDialogRes(t)}}}),s("ReportDialogue",{attrs:{id:e.current_id_story,report_dlg:e.prompt_report_post,report_type:"story",label_report:"Why are you reporting?"},on:{closeDialog:function(t){e.prompt_report_post=t,e.VIB_REPORT_STORY_UPDATE(!1),e.update_report(t),e.VIB_REPORT_STORY_UPDATE(!1)},closeDialogOnly:function(t){e.prompt_report_post=t}}}),e.rev_peeks.length>0?s("div",[s("hooper",{staticClass:"mb-1",attrs:{settings:e.hooperSettings}},e._l(e.stories,(function(t,i){return s("slide",{key:i,staticClass:"q-pr-xs"},[JSON.parse(t.gallery).length?["gif"==e.getStoryKey(t,"mediaType")?s("q-img",{staticClass:"h-100 items-center-video",attrs:{rounded:"",ratio:3/4,src:""},on:{click:function(t){return t.stopPropagation(),e.activeSlider(i)}}},[s("RevPlayer",{staticClass:"q-img__image absolute-full",staticStyle:{display:"flex","align-items":"center",width:"100%"},attrs:{obj_video:{type:e.getStoryKey(t,"mediaType"),poster:e.getStoryKey(t,"poster"),src:e.getStoryKey(t,"link")},settings:{events:!1,autoplay:!0,fullscreen:!0}}}),s("BelowUserContent",{attrs:{story:t}})],1):s("q-img",{staticClass:"h-100",attrs:{rounded:"",ratio:3/4,src:e.getStorySrc(t)},on:{click:function(t){return t.stopPropagation(),e.activeSlider(i)}}},[s("BelowUserContent",{attrs:{story:t}})],1)]:e._e()],2)})),1)],1):e._e()],1)},T=[],x=s("7e04"),O=(s("955f"),s("6589")),A=s("55cf"),I=s("1412"),D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"absolute-bottom text-left q-pl-md",staticStyle:{"border-radius":"5px 5px 0 0"},on:{click:function(t){return t.stopPropagation(),function(){return e.$router.push("/"+e.story.username)}.apply(null,arguments)}}},[s("div",{staticClass:"post__author author vcard inline-items"},[s("div",{staticClass:"relative-position"},[s("img",{staticClass:"rounded avatar-thumb",staticStyle:{cursor:"pointer",width:"30px",height:"30px"},attrs:{src:e.$revfunc.profileImg(e.story.profile_img,e.story.id_user),alt:e.story.username}}),e.story.badge&&"none"!=e.story.badge?s("img",{staticStyle:{position:"absolute",width:"14px",height:"14px",bottom:"4px",right:"-8px"},attrs:{src:"none"!=e.story.badge?"/img/badges/"+e.story.badge+".png":"",alt:"author"}}):e._e()]),s("div",{staticClass:"author-date"},[s("div",{staticClass:"post__author-name fn",staticStyle:{"font-size":"12px"}},[s("div",[e._v(e._s(e._f("ellipsis")(e.story.profile_name,10)))]),s("div",{staticClass:"username"},[e._v("@"+e._s(e._f("ellipsis")(e.story.username,12)))])])])])])},R=[],N={name:"BelowUserContent",props:{story:{type:Object,required:!0}}},q=N,$=(s("cfaa"),s("068f")),V=s("eebe"),j=s.n(V),M=Object(b["a"])(q,D,R,!1,null,"d221e414",null),K=M.exports;j()(M,"components",{QImg:$["a"]});var U={name:"Stories",data(){return{peeksubmittext:"Add REVPeek",posting:!1,prompt_report_post:!1,prompt_delete_story:!1,current_id_story:0,startAt:1,allStories:[],reportedStories:[],hooperSettings:{itemsToShow:2,keysControl:!0,centerMode:!1,breakpoints:{800:{centerMode:!1,itemsToShow:3},1e3:{itemsToShow:9,pagination:"fraction"}}},story_preview:null,mediaload:!1,settings:{fade:!0,speed:100,arrows:!0,dots:!1,cssEase:"ease",slidesPerRow:6,slidesToScroll:1,responsive:[{breakpoint:768,slidesToShow:2,slidesToScroll:2,initialSlide:2,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}}]}}},components:{Hooper:x["a"],Slide:x["b"],ReportDialogue:O["a"],RevPlayer:A["a"],SureDialog:I["a"],BelowUserContent:K},watch:{vib_revpeek_story_id(e){if(e){let t=this.stories.findIndex((t=>t.id_story==e));t>=0&&(this.REV_PEEKS_POPUP({dialog:!0,index:t}),this.VIB_REVPEEK_STORY_ID_UPDATE(!1))}}},computed:{...Object(o["e"])("config",["vib_revpeek_story_id"]),...Object(o["e"])("posts",["rev_peeks","stories"])},methods:{...Object(o["d"])("config",["VIB_UPDATE","VIB_REPORT_STORY_UPDATE","VIB_DELETE_STORY_UPDATE","VIB_REVPEEK_STORY_ID_UPDATE"]),...Object(o["d"])("posts",["REV_PEEKS_POPUP"]),...Object(o["b"])("posts",["deletePostStory"]),openDialogRes(e){e&&this.deleteStory(this.vib_delete_story),this.VIB_DELETE_STORY_UPDATE(!1),this.VIB_REVPEEK_STORY_ID_UPDATE(!1),this.prompt_delete_story=!1},update_report(e){let t=this.allStories.findIndex((t=>t.id_story==e.id));this.allStories[t]["is_reported"]=1,this.reportedStories.push(String(e.id))},getStoryKey(e,t=""){let s=JSON.parse(e.gallery)[0];return s[t]},getStorySrc(e){let t=JSON.parse(e.gallery)[0];if("text"==t.mediaType)return this.$revfunc.baseurl()+"assets/images/logo.png";this.$revfunc.uploadPath(),e.id_user;return"image"==t.mediaType||"gif"==t.mediaType&&t.link?t.link:t.poster},deleteStory(e){this.deletePostStory({id_story:e}).then((e=>{e.status?this.$revfunc.notification("Your REVpeek is deleted !"):this.$revfunc.notification(e.message)}))},activeSlider(e){let t=0;const s=this.stories.length;for(let i=0;i<s;i++){if(i==e)break;t+=JSON.parse(this.stories[i].gallery).length}this.REV_PEEKS_POPUP({dialog:!0,index:t})}}},L=U,F=(s("6074"),s("27f9")),Y=Object(b["a"])(L,C,T,!1,null,"bca5bdf2",null),B=Y.exports;j()(Y,"components",{QInput:F["a"],QImg:$["a"]});var J=s("625a"),W=s("cd5d"),H={name:"NewsFeed",mixins:[a["a"],d["a"],n["a"],l["a"]],data(){return{rev_post_arr:[],revNews:[],active:1,me:this.$q.localStorage.getItem("rev_user"),running_ads:[]}},components:{RevPosts:c["a"],CreatePosts:E["a"],News:k["a"],PostsCard:u["a"],AdShow:S,Stories:B,FeaturedMembers:J["a"],FollowSuggestions:W["a"]},mounted(){this.runMounted()},created(){this.$route.query&&"trending"==this.$route.query.page&&this.UPDATE_ACTIVE_KEY(this.$route.query.page)},watch:{active_key(){this.runMounted()}},computed:{...Object(o["e"])("posts",["rev_posts","newsfeed"]),...Object(o["e"])("config",["active_key"]),...Object(o["e"])("notifications",["topmenus_extras"]),ad_index(){let e;return e=Math.floor(10*Math.random()+1),this.newsfeed.length<=10?e=Math.floor(10*Math.random()+1):this.newsfeed.length<=100&&(e=Math.floor(100*Math.random()+1)),e}},methods:{...Object(o["b"])("posts",["getConnectionsNewsFeed","getTrendingPosts","getFollowerPosts","getFollowingPosts","getHashTagResult"]),...Object(o["d"])("user",["TOGGLE_DIALOG","TOGGLE_SHARE_DIALOG"]),...Object(o["d"])("posts",["INIT","CONCAT_NEW"]),...Object(o["d"])("config",["UPDATE_ACTIVE_KEY"]),runMounted(){this.active_key||this.UPDATE_ACTIVE_KEY("latest"),"undefined"!=typeof this.$route.params.page_type&&this.topMenusKeys().includes(this.$route.params.page_type.toLowerCase())&&this.UPDATE_ACTIVE_KEY(this.$route.params.page_type.toLowerCase()),this.isActiveTopMenu(1,this.active_key)},updateNewsfeedKey(e){let t=this.newsfeed.filter((t=>t.id_post==e.id_post)).length;for(let s=this.newsfeed.length-1;s>=0;s--){if(this.newsfeed[s].id_post==e.id_post){t--;const i={key:"newsfeed",i:s,in_key:e.key,value:e.value};if(this.UPDATE_KEY(i),"is_rerev_post"==e.key){const t=this.$q.localStorage.getItem("rev_user");if(1==e.value){if(0==this.newsfeed[s].share_type){const e=Object.assign({},this.newsfeed[s]);e.share_type=1,e.is_rerev_post=1,e.share_user={userId:t.userId,profile_img:t.profile_img,profile_name:t.profile_name,cover_img:t.cover_img,username:t.username,badge:t.badge},this.ADD({key:"newsfeed",value:e})}}else this.newsfeed[s].share_type>0&&this.newsfeed[s].share_user&&this.newsfeed[s].share_user.userId==t.userId&&this.REMOVE({key:"newsfeed",i:s})}}if(!t)break}},generateRandomNumber(){let e=this.newsfeed.length-1,t=Math.floor(Math.random()*e+1);this.rev_post_arr.includes(t),this.rev_post_arr.push(t)},randomNumber(){let e=this.rev_posts.length;for(let t=e-1;t>=0;t--)this.rev_post_arr.length>this.newsfeed.length?this.rev_post_arr.push(this.newsfeed.length):this.generateRandomNumber()},isActiveTopMenu(e=0,t,s=0){switch(this.$refs.bar.stop(),this.$refs.bar.start(),e&&(this.$refs.newsfeedScroll.setIndex(0),this.$refs.newsfeedScroll.reset(),this.$refs.newsfeedScroll.resume(),this.UPDATE_ACTIVE_KEY(t),s&&(this.$revfunc.scrollToTop(),this.INIT({key:"newsfeed",value:[]}))),t){case"trending":this.trendingPosts();break;case"latest":this.getPosts();break;case"following":this.followingPosts();break;case"followers":this.followerPosts();break;case"covid":this.getHashTagPosts("#covid");break;default:this.hasTopmenusExtras(t)&&this.getHashTagPosts(t);break}},hasTopmenusExtras(e){return this.topmenus_extras.filter((t=>t.value==e)).length},topMenusKeys(){return[...this.topmenus_extras.map((e=>e.value))]},getPosts(){let e={start:this.newsfeed.length};this.newsfeed.length&&(e.limit=10),this.getConnectionsNewsFeed(e).then((e=>{"latest"==this.active_key&&e.status&&(this.CONCAT_NEW({key:"newsfeed",value:e.results}),this.running_ads=e.running_ads,e.rev_posts&&(this.revNews=e.rev_posts),e.results.length?this.onLoadDone():this.onLoadDone(!0))})).catch((e=>{}))},goToRoute(e){this.$router.push("/"+e)},trendingPosts(){let e={start:this.newsfeed.length};this.getTrendingPosts(e).then((e=>{"trending"==this.active_key&&(e.status&&(this.CONCAT_NEW({key:"newsfeed",value:e.results}),e.rev_posts&&(this.revNews=e.rev_posts)),e.results.length?this.onLoadDone():this.onLoadDone(!0))})).catch((e=>{}))},followingPosts(){let e={start:this.newsfeed.length};this.getFollowingPosts(e).then((e=>{"following"==this.active_key&&(e.status&&this.CONCAT_NEW({key:"newsfeed",value:e.results}),e.results.length?this.onLoadDone():this.onLoadDone(!0))})).catch((e=>{}))},followerPosts(){let e={start:this.newsfeed.length};this.getFollowerPosts(e).then((e=>{this.isFetched=!0,"followers"==this.active_key&&(e.status&&this.CONCAT_NEW({key:"newsfeed",value:e.results}),e.results.length?this.onLoadDone():this.onLoadDone(!0))})).catch((e=>{}))},getHashTagPosts(e=""){let t={start:this.newsfeed.length,hashtag:e};this.getHashTagResult(t).then((e=>{(this.hasTopmenusExtras(this.active_key)||"covid"==this.active_key)&&(e.status&&this.CONCAT_NEW({key:"newsfeed",value:e.results}),e.results.length?this.onLoadDone():this.onLoadDone(!0))})).catch((e=>{}))},onLoadDone(e=!1){this.$refs.bar.stop(),this.loopDone&&this.loopDone(e),this.addElementObserver()},onLoad(e,t){this.loopDone=t,this.isActiveTopMenu(0,this.active_key)}}},G=H,Q=s("9989"),z=s("7ea5"),X=s("ef35"),Z=Object(b["a"])(G,i,r,!1,null,null,null);t["default"]=Z.exports;j()(Z,"components",{QPage:Q["a"],QAjaxBar:z["a"],QInfiniteScroll:X["a"]})},6074:function(e,t,s){"use strict";s("f2c7")},a5b8:function(e,t,s){},cfaa:function(e,t,s){"use strict";s("a5b8")},f2c7:function(e,t,s){}}]);