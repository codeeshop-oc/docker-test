(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"0b77":function(t,i,e){},"240b":function(t,i,e){"use strict";e("0b77")},e487:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"q-notification"}},[n("TopHeader"),n("div",{staticClass:"container px-0 main-content"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col col-xl-9 order-xl-2 col-lg-9 order-lg-2 col-md-12 order-md-1 col-sm-12 col-12"},[n("div",{staticClass:"ui-block"},[n("div",{staticClass:"ui-block-title"},[n("h6",{staticClass:"title d-inline"},[t._v("Notifications")]),t._m(0),n("div",{staticClass:"text-right"},[t.submitting?t._e():[t.selected.length?n("button",{staticClass:"btn-sm btn btn-primary",attrs:{type:"button"},on:{click:t.resetSelected}},[n("span",[t._v("Unselect All")])]):n("button",{staticClass:"btn-sm btn btn-primary",attrs:{type:"button"},on:{click:t.onSelectAll}},[n("span",[t._v("Select All")])])],t.selected.length?[n("button",{staticClass:"btn-sm btn btn-primary",attrs:{type:"button"},on:{click:function(i){return t.onReadNotification("multiple",t.selected)}}},[t.submitting?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("span",[t._v("Read Selected")])]),n("button",{staticClass:"btn-sm btn btn-primary",attrs:{type:"button"},on:{click:function(i){return t.onDeleteNotification("multiple",t.selected)}}},[t.submitting?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("span",[t._v("Delete Selected")])])]:t._e()],2)]),t.header_notification.notifications.length>0?n("ul",{staticClass:"notification-list"},[n("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[n("div",{staticClass:"row justify-center q-my-md"},[n("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}],null,!1,3159847669)},t._l(t.header_notification.notifications,(function(i,e){return n("li",{key:e,staticClass:"c-pointer",class:0==i.is_read?"bg-unread":"",on:{click:function(e){e.stopPropagation(),t.onReadNotification("single",i.notification_id,0==i.is_read),t.navigateToRoute(i.type,i.id)}}},[n("q-checkbox",{staticClass:"q-px-lg",attrs:{"keep-color":"",dense:"",color:"grey",val:i.notification_id},model:{value:t.selected,callback:function(i){t.selected=i},expression:"selected"}}),n("div",{staticClass:"author-thumb",on:{click:function(e){e.stopPropagation(),t.onReadNotification("single",i.notification_id,0==i.is_read),t.goRoute("/"+i.user.username)}}},[n("img",{staticClass:"rounded avatar-thumb",attrs:{src:t.$revfunc.profileImg(i.user.profile_img,i.user.userId),alt:"author"}}),i.user.badge&&"none"!=i.user.badge?n("img",{staticClass:"revbadge-postcard",staticStyle:{position:"absolute",right:"-8px",bottom:"-8px"},attrs:{src:"none"!=i.user.badge?"/img/badges/"+i.user.badge+".png":"",alt:"author"}}):t._e()]),n("div",{staticClass:"notification-event"},[n("a",{staticClass:"h6 notification-friend",on:{click:function(e){e.stopPropagation(),t.onReadNotification("single",i.notification_id,0==i.is_read),t.goRoute("/"+i.user.username)}}},[t._v("\n                    "+t._s(i.user.profile_name)+"\n                    \n                  ")]),n("div",{on:{click:function(e){e.stopPropagation(),t.onReadNotification("single",i.notification_id,0==i.is_read),t.goRoute("/"+i.user.username)}}},[n("span",{staticClass:"chat-message-item text-rev"},[t._v("\n                      @"+t._s(i.user.username)+"\n                    ")])]),n("div",{staticClass:"sm-font"},["NEW_STORY"==i.type?n("div",{staticClass:"q-ml-xs text-rev"},[t._v("added new peek")]):t._e(),"LIKE"==i.type?n("div",{staticClass:"q-ml-xs text-rev"},[["usaheart","laughing","nonsense","sad","thumbsdown","angry","wow"].includes(i.emojiname)?n("span",[t._v("reacted to REV")]):["thumsup"].includes(i.emojiname)?n("span",[t._v("liked REV")]):t._e()]):"POST_COMMENT"==i.type?n("div",{staticClass:"q-ml-xs text-rev"},[t._v("commented on REV")]):t._e(),"LIKE_COMMENT"==i.type?n("div",{staticClass:"q-ml-xs text-rev"},[["usaheart","laughing","nonsense","sad","thumbsdown","angry","wow"].includes(i.emojiname)?n("span",[t._v("reacted to comment")]):["thumsup"].includes(i.emojiname)?n("span",[t._v("liked comment")]):t._e()]):["POST_SHARE","reREV"].includes(i.type)?n("div",{staticClass:"q-ml-xs text-rev"},[t._v("reREV REV")]):"NEW_POST"==i.type?n("div",{staticClass:"q-ml-xs text-rev"},[t._v("created a new REV")]):t._e()])]),n("span",{staticClass:"notification-icon notification"},t._l(t.$revfunc.emojis(),(function(e){return["LIKE_COMMENT","LIKE"].includes(i.type)&&i.emojiname==e?n("img",{attrs:{width:"32",src:"img/emoji/"+e+".png"}}):t._e()})),0),n("div",{staticClass:"more"},[n("div",{staticClass:"flex q-gutter-md justify-end"},[n("a",{on:{click:function(e){return e.stopPropagation(),t.onReadNotification("single",i.notification_id,0==i.is_read)}}},[n("i",{staticClass:"fas fa-check fa-1-5x"})]),n("a",{on:{click:function(e){return e.stopPropagation(),t.onDeleteNotification("single",i.notification_id)}}},[n("i",{staticClass:"fas fa-times fa-1-5x"})])]),n("span",{staticStyle:{color:"#515365"}},[n("time",{staticClass:"entry-date updated",attrs:{datetime:"2004-07-24T18:18"}},[t._v("\n                      "+t._s(t.$revfunc.localeTime(i.created_at.replace(" ","T")+"Z"))+"\n                    ")])])])],1)})),0)],1):n("div",{staticClass:"q-pa-md text-center text-h5"},[n("img",{staticStyle:{width:"250px"},attrs:{src:e("2f391")}}),n("div",[t._v("Notification Not Found")])])])]),n("div",{staticClass:"col col-xl-3 order-xl-1 col-lg-3 order-lg-1 col-md-12 order-md-2 col-sm-12 col-12 responsive-display-none"},[n("SideNavProfile")],1)])])],1)},s=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("button",{staticClass:"btn-sm btn btn-primary",staticStyle:{width:"0",margin:"0",visibility:"hidden"},attrs:{type:"button"}},[e("span",[t._v("X")])])}],o=e("57e1"),a=e("2aee"),c=e("4e79"),l=e("2f62"),r={name:"Notifications",mixins:[c["a"]],data(){return{selected:[],notifications:[],start:0,submitting:!1,countReaded:0}},components:{TopHeader:o["a"],SideNavProfile:a["a"]},computed:{...Object(l["e"])("chat",["header_notification"])},mounted(){},methods:{...Object(l["b"])("chat",["getNotificationsListNext"]),...Object(l["d"])("chat",["UPDATE_NOTIFICATIONS","UPDATE_NOTIFICATIONS_VALUES","DELETE_NOTIFICATIONS"]),...Object(l["b"])("notifications",["readNotification","deleteNotification","deleteNotificationMultiple"]),onLoad(t,i){this.getNotificationsListNext({notification_type:"NOTIFICATIONS",start:this.header_notification.notifications.length,limit:10}).then((t=>{t.notifications.length>0?i():i(!0)}))},goRoute(t){this.$route.path!=t&&this.$router.push(t)},navigateToRoute(t,i){let e="";if("NEW_STORY"==t)return e="/home",void this.openStory(i);e="/posts/"+i,this.goRoute(e)},onSelectAll(){for(let t in this.header_notification.notifications)this.selected.push(this.header_notification.notifications[t].notification_id),0==this.header_notification.notifications[t].is_read&&++this.countReaded},resetSelected(){this.countReaded=0,this.selected=[]},onReadNotification(t,i=null,e=!1){"all"==t&&(this.UPDATE_NOTIFICATIONS({type:"notification",count:0}),this.UPDATE_NOTIFICATIONS_VALUES({type:"all"})),"single"==t?e&&this.UPDATE_NOTIFICATIONS({type:"notification",count:parseInt(this.header_notification.notifications_count)-1}):"multiple"==t&&(this.UPDATE_NOTIFICATIONS({type:"notification",count:parseInt(this.header_notification.notifications_count)-this.countReaded}),i=i.join(","));let n={type:t,notification_id:i};this.UPDATE_NOTIFICATIONS_VALUES({type:"notification_multiple",id:i}),this.submitting=!0,this.readNotification(n).then((t=>{this.resetSelected(),this.submitting=!1})).catch((t=>{}))},onDeleteNotification(t="single",i=null,e=!1){"single"==t?e&&this.UPDATE_NOTIFICATIONS({type:"notification",count:parseInt(this.header_notification.notifications_count)-1}):"multiple"==t&&(this.UPDATE_NOTIFICATIONS({type:"notification",count:parseInt(this.header_notification.notifications_count)-this.countReaded}),i=i.join(","));let n={type:"delete_multiple",notification_id:i};this.DELETE_NOTIFICATIONS({type:"notification_multiple",id:i}),this.readNotification(n).then((t=>{})).catch((t=>{}))}}},d=r,u=(e("240b"),e("2877")),f=e("ef35"),p=e("8f8e"),m=e("8380"),_=e("eebe"),h=e.n(_),g=Object(u["a"])(d,n,s,!1,null,"dc355be2",null);i["default"]=g.exports;h()(g,"components",{QInfiniteScroll:f["a"],QCheckbox:p["a"],QSpinnerDots:m["a"]})}}]);