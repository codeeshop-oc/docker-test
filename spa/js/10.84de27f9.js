(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{8782:function(t,e,s){"use strict";s("cdeb")},"8a84":function(t,e,s){"use strict";s("a6ce")},a6ce:function(t,e,s){},accf:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"account-settings"}},[s("q-ajax-bar",{ref:"bar",staticClass:"bg-rev",attrs:{position:"top",size:"5px","skip-hijack":""}}),s("TopHeader"),null!=t.user?s("div",{staticClass:"container px-0 main-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col col-xl-9 order-xl-2 col-lg-9 order-lg-2 col-md-12 order-md-1 col-sm-12 col-12"},[s("div",{staticClass:"ui-block"},[t._m(0),s("div",{staticClass:"ui-block-content p-4"},[s("q-form",{staticClass:"content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating"},[s("label",{staticClass:"control-label"},[t._v("First Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.firstname,expression:"user.firstname"}],staticClass:"form-control",attrs:{placeholder:"",type:"text"},domProps:{value:t.user.firstname},on:{input:function(e){e.target.composing||t.$set(t.user,"firstname",e.target.value)}}}),s("span",{staticClass:"material-input"})])]),s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating"},[s("label",{staticClass:"control-label"},[t._v("Last Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.lastname,expression:"user.lastname"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.lastname},on:{input:function(e){e.target.composing||t.$set(t.user,"lastname",e.target.value)}}}),s("span",{staticClass:"material-input"})])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating pe-none"},[s("label",{staticClass:"control-label"},[t._v("Username")]),s("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.user.username}}),s("span",{staticClass:"material-input"})])]),s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating"},[s("label",{staticClass:"control-label q-mx-lg"},[s("div",{staticClass:"q-mx-md"},[t._v("Phone Number")])]),s("VueTelInput",{attrs:{color:"grey",placeholder:"Mobile Number",preferredCountries:["us","gb"]},on:{onInput:t.onInput},model:{value:t.user.phone,callback:function(e){t.$set(t.user,"phone",e)},expression:"user.phone"}})],1)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating"},[s("label",{staticClass:"control-label"},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{placeholder:"",type:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),s("span",{staticClass:"material-input"})]),s("div",{staticClass:"form-group label-floating"},[s("div",{staticClass:"form-group label-floating is-select"},[s("label",{staticClass:"control-label"},[t._v("Gender")]),s("q-select",{staticClass:"rev-select q-pl-md",attrs:{"dropdown-icon":"fas fa-chevron-down",outlined:"",color:"grey-7",options:t.options_gender,"popup-content-class":"rev-select-popup"},model:{value:t.user.gender,callback:function(e){t.$set(t.user,"gender",e)},expression:"user.gender"}})],1)])]),s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating"},[s("label",{staticClass:"control-label",staticStyle:{left:"0"}},[t._v("Birthday")]),s("Calendar",{attrs:{startingDate:t.user.dob},on:{newDate:function(e){t.user.dob=e}}})],1)])]),s("hr"),s("h6",[t._v("Location")]),s("div",{staticClass:"row xxxxxxxxxxx"},[s("div",{staticClass:"col col-lg-5 col-md-5 col-sm-12 col-12"},[s("q-select",{staticClass:"rev-select q-pl-md",attrs:{"dropdown-icon":"fas fa-chevron-down",color:"grey-7",outlined:"",options:t.all_countries,label:"Country","popup-content-class":"rev-select-popup"},model:{value:t.user.country,callback:function(e){t.$set(t.user,"country",e)},expression:"user.country"}})],1),s("div",{staticClass:"col col-lg-1 col-md-1 col-sm-12 col-12"},[s("q-checkbox",{attrs:{label:"Private",color:"primary",val:"country"},model:{value:t.is_private,callback:function(e){t.is_private=e},expression:"is_private"}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col col-lg-5 col-md-5 col-sm-12 col-12"},[s("q-select",{staticClass:"rev-select q-pl-md",attrs:{"dropdown-icon":"fas fa-chevron-down",outlined:"",options:t.all_states,label:"State / Province",color:"grey-7","popup-content-class":"rev-select-popup"},model:{value:t.user.state,callback:function(e){t.$set(t.user,"state",e)},expression:"user.state"}})],1),s("div",{staticClass:"col col-lg-1 col-md-1 col-sm-12 col-12"},[s("q-checkbox",{attrs:{label:"Private",color:"primary",val:"state"},model:{value:t.is_private,callback:function(e){t.is_private=e},expression:"is_private"}})],1),s("div",{staticClass:"col col-lg-6 col-md-6 col-sm-12 col-12"},[s("div",{staticClass:"form-group label-floating"},[s("label",{staticClass:"control-label"},[t._v("City")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.city,expression:"user.city"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.city},on:{input:function(e){e.target.composing||t.$set(t.user,"city",e.target.value)}}}),s("span",{staticClass:"material-input"})])])]),s("div",{staticClass:"row q-mt-xl"},[s("div",{staticClass:"text-center col col-6"},[s("button",{staticClass:"btn btn-lg w-100 rev-btn rev-btn-text",attrs:{type:"button",flat:""},on:{click:function(e){return t.onSubmit()}}},[t.loading?s("span",[s("i",{staticClass:"fa-2x fas fa-spinner fa-spin"})]):s("div",[t._v("Save all Changes")])])]),s("q-space"),s("div",{staticClass:"text-center col col-6"},[s("button",{staticClass:"btn btn-lg w-100 rev-btn rev-btn-text",attrs:{type:"button",flat:""},on:{click:function(){t.dlg_deactivate=!0}}},[t._v("\n                    Deactivate Account\n                  ")])])],1)])],1)])]),s("div",{staticClass:"col col-xl-3 order-xl-1 col-lg-3 order-lg-1 col-md-12 order-md-2 col-sm-12 col-12 responsive-display-none"},[s("SideNavProfile")],1)])]):t._e(),s("SureDialog",{attrs:{heading:"Are you sure to Deactivate Account ?",openDialog:t.dlg_deactivate},on:{"update:value":function(e){return t.toDeactivate(e)}}})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui-block-title"},[s("h6",{staticClass:"title"},[t._v("Account Settings")])])}],l=s("2b0e"),o=s("f62e"),a=s("29e0"),r=s("98c8"),c=s("2f62"),u=(s("e2c0"),s("57e1")),h=s("2aee"),d=s("5289"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"picker-group"},[s("scroll-picker",{staticClass:"month",attrs:{options:t.months,startClass:"month"},on:{input:t.emitNewDate},model:{value:t.currentMonth,callback:function(e){t.currentMonth=e},expression:"currentMonth"}}),s("scroll-picker",{staticClass:"day",attrs:{options:t.days,startClass:"day"},on:{input:t.emitNewDate},model:{value:t.currentDay,callback:function(e){t.currentDay=e},expression:"currentDay"}}),s("scroll-picker",{staticClass:"years",attrs:{options:t.years,startClass:"year"},on:{input:t.emitNewDate},model:{value:t.currentYear,callback:function(e){t.currentYear=e},expression:"currentYear"}})],1)},m=[];s("ddb0");function v(t,e){let s=null;return function(){s&&(clearTimeout(s),s=null);const i=this,n=arguments;s=setTimeout((()=>t.apply(i,n)),e)}}function f(t){const{top:e,bottom:s}=t.getBoundingClientRect();return(e+s)/2}function g(t){return t.map((t=>{switch(typeof t){case"string":return{value:t,name:t};case"number":case"boolean":return{value:t,name:`${t}`}}return t}))}function b(t){return t.changedTouches||t.touches}function x(t){return b(t)?t.changedTouches[0]||t.touches[0]:t}var C={props:{value:null,options:{type:Array,default:()=>[]},dragSensitivity:{type:Number,default:1.7},touchSensitivity:{type:Number,default:1.7},scrollSensitivity:{type:Number,default:1},empty:{type:String,default:"No Items"},placeholder:{type:String,default:null},startClass:{type:String,default:null}},data(){const t=g(this.options);let e=t.findIndex((t=>t.value==this.value));-1===e&&!this.placeholder&&this.options.length>0&&(e=0);const s=t[e]&&t[e].value||null;return{normalizedOptions:t,innerIndex:e,innerValue:s,top:null,pivots:[],pivotMin:0,pivotMax:0,transitioning:!1,transitionTO:null,start:null,isMouseDown:!1,isDragging:!1,scrollOffsetTop:0,scrollMin:0,scrollMax:0}},mounted(){this.calculatePivots(),this.top=this.findScrollByIndex(this.innerIndex),this.innerValue!==this.value&&this.$emit("input",this.innerValue),this.$el.addEventListener("touchstart",this.onStart),this.$el.addEventListener("touchmove",this.onMove),this.$el.addEventListener("touchend",this.onEnd),this.$el.addEventListener("touchcancel",this.onCancel),this.$el.addEventListener("mousewheel",this.onScroll),this.$el.addEventListener("DOMMouseScroll",this.onScroll),this.$el.addEventListener("wheel",this.onScroll),this.$el.addEventListener("mousedown",this.onStart),this.$el.addEventListener("mousemove",this.onMove),this.$el.addEventListener("mouseup",this.onEnd),this.$el.addEventListener("mouseleave",this.onCancel)},destroyed(){this.$el.removeEventListener("touchstart",this.onStart),this.$el.removeEventListener("touchmove",this.onMove),this.$el.removeEventListener("touchend",this.onEnd),this.$el.removeEventListener("touchcancel",this.onCancel),this.$el.removeEventListener("mousewheel",this.onScroll),this.$el.removeEventListener("DOMMouseScroll",this.onScroll),this.$el.removeEventListener("wheel",this.onScroll),this.$el.removeEventListener("mousedown",this.onStart),this.$el.removeEventListener("mousemove",this.onMove),this.$el.removeEventListener("mouseup",this.onEnd),this.$el.removeEventListener("mouseleave",this.onCancel)},watch:{value(t){if((null===t||void 0===t)&&this.placeholder)return void this.correction(-1);const e=this.normalizedOptions.findIndex((e=>e.value==t));-1!==e?this.innerIndex!==e&&this.correction(e):this.$emit("input",this.innerValue)},options(t){const e=this.normalizedOptions=g(t);let s=e.findIndex((t=>t.value==this.value));-1===s&&!this.placeholder&&this.options.length>0&&(s=0);const i=e[s]&&e[s].value||null;this.$nextTick((()=>{this.calculatePivots(),this.top=this.findScrollByIndex(s),this.innerIndex=s,this.innerValue!==i&&this.$emit("input",this.innerValue=i)}))}},methods:{resize(){this.$nextTick((()=>{this.calculatePivots(),this.top=this.findScrollByIndex(this.innerIndex)}))},calculatePivots(){const t=this.$refs.list.getBoundingClientRect().top;this.pivots=(this.$refs.items||[]).map((e=>f(e)-t)).sort(((t,e)=>t-e)),this.pivotMin=Math.min(...this.pivots),this.pivotMax=Math.max(...this.pivots),this.scrollOffsetTop=this.$refs.selection.offsetTop+this.$refs.selection.offsetHeight/2,this.scrollMin=this.scrollOffsetTop-this.pivotMin,this.scrollMax=this.scrollOffsetTop-this.pivotMax},sanitizeInternalIndex(t){return Math.min(Math.max(t,this.placeholder?-1:0),this.normalizedOptions.length-1)},findIndexFromScroll(t){let e=null,s=0;return this.pivots.forEach(((i,n)=>{const l=i+t-this.scrollOffsetTop;(null===e||Math.abs(e)>Math.abs(l))&&(s=n,e=l)})),this.placeholder||0===this.options.length?s-1:s},findScrollByIndex(t){let e=t;return(this.placeholder||0===this.options.length)&&e++,t>-1&&e in this.pivots?this.scrollOffsetTop-this.pivots[e]:t>=this.pivots.length?this.scrollOffsetTop-this.pivotMax:this.scrollOffsetTop-this.pivotMin},onScroll(t){if(this.top>=this.scrollMin&&t.deltaY<0)return;if(this.top<=this.scrollMax&&t.deltaY>0)return;if(1===this.pivots.length)return;t.preventDefault();const e=this.sanitizeInternalIndex(this.innerIndex+(t.deltaY>0?1:-1)),s=t.deltaY>0?this.findScrollByIndex(e-1)-this.findScrollByIndex(e):this.findScrollByIndex(e)-this.findScrollByIndex(e+1),i=Math.max(Math.min(t.deltaY,s),-1*s);this.top=Math.min(Math.max(this.top-i*this.scrollSensitivity,this.scrollMax),this.scrollMin);const n=this.sanitizeInternalIndex(this.findIndexFromScroll(this.top)),l=this.normalizedOptions[n]&&this.normalizedOptions[n].value||null;this.innerIndex=n,this.innerValue!==l&&this.$emit("input",this.innerValue=l),this.onAfterWheel()},onAfterWheel:v((function(){this.correction(this.findIndexFromScroll(this.top))}),200),onStart(t){t.cancelable&&t.preventDefault();const{clientY:e}=x(t);this.start=[this.top,e],b(t)||(this.isMouseDown=!0),this.isDragging=!1},onMove(t){if(t.cancelable&&t.preventDefault(),!this.start)return;const{clientY:e}=x(t),s=e-this.start[1];Math.abs(s)>1.5&&(this.isDragging=!0),this.top=this.start[0]+s*(b(t)?this.touchSensitivity:this.dragSensitivity)},onEnd(t){t.cancelable&&t.preventDefault(),this.isDragging?this.correction(this.findIndexFromScroll(this.top)):this.handleClick(t),this.start=null,this.isDragging=!1,this.isMouseDown=!1},onCancel(t){t.cancelable&&t.preventDefault(),this.correction(this.findIndexFromScroll(this.top)),this.start=null,this.isMouseDown=!1,this.isDragging=!1},handleClick(t){const e=x(t),s=e.clientX,i=e.clientY,n=this.$refs.top.getBoundingClientRect(),l=this.$refs.bottom.getBoundingClientRect();n.left<=s&&s<=n.right&&n.top<=i&&i<=n.bottom?this.correction(this.innerIndex-1):l.left<=s&&s<=l.right&&l.top<=i&&i<=l.bottom&&this.correction(this.innerIndex+1)},correction(t){const e=this.sanitizeInternalIndex(t),s=this.normalizedOptions[e]&&this.normalizedOptions[e].value||null;this.top=this.findScrollByIndex(e),this.transitioning=!0,this.transitionTO&&(clearTimeout(this.transitionTO),this.transitionTO=null),this.transitionTO=setTimeout((()=>{this.transitioning=!1,this.transitionTO=null,this.innerIndex=e,this.innerValue!==s&&(this.innerValue=s,this.$emit("input",this.innerValue))}),100)}},render(t){let e=[];return this.placeholder?e.push(t("div",{class:{"vue-scroll-picker-item":!0,"-placeholder":!0,"-selected":-1==this.innerIndex},ref:"items",refInFor:!0,domProps:{innerHTML:this.placeholder}})):0===this.normalizedOptions.length&&null===this.placeholder&&e.push(t("div",{class:["vue-scroll-picker-item","-empty","-selected"],ref:"items",refInFor:!0,domProps:{innerHTML:this.empty}})),e=e.concat(this.normalizedOptions.map(((e,s)=>t("div",{class:{"vue-scroll-picker-item":!0,"-selected":this.innerIndex==s},key:e.value,ref:"items",refInFor:!0,domProps:{innerHTML:e.name}})))),t("div",{class:["vue-scroll-picker"]},[t("div",{class:["vue-scroll-picker-list"]},[t("div",{ref:"list",class:{"vue-scroll-picker-list-rotator":!0,"-transition":this.transitioning},style:null!==this.top?{top:`${this.top}px`}:{}},e)]),t("div",{class:["vue-scroll-picker-layer"]},[t("div",{class:["top",this.startClass],ref:"top"}),t("div",{class:["middle"],ref:"selection"}),t("div",{class:["bottom"],ref:"bottom"})])])}},y=(s("d65a"),{name:"Calendar",data(){return{currentYear:1990,currentMonth:1,currentDay:1}},computed:{years(){const t=(new Date).getFullYear(),e=1900;return Array.from({length:t-e+1},((t,s)=>e+s)).reverse()},days(){const t=new Date(this.currentYear,this.currentMonth,0).getDate();return Array.from({length:t},((t,e)=>e+1))},months(){return Array.from({length:12},((t,e)=>e+1))}},components:{ScrollPicker:C},props:{startingDate:{required:!1}},mounted(){let t=l["a"].moment(this.startingDate).format("YYYY-MM-DD");t=t.split("-"),this.currentMonth=t[1],this.currentYear=t[0],this.currentDay=t[2]},methods:{emitNewDate(){const t=(this.currentDay<10?"0":"")+parseInt(this.currentDay);this.currentYear&&this.currentMonth&&this.currentDay?this.$emit("newDate",`${this.currentYear}-${this.currentMonth}-${t}`):this.$emit("newDate","")}}}),$=y,M=(s("8782"),s("2877")),S=Object(M["a"])($,p,m,!1,null,"227ee684",null),D=S.exports,I=s("1412"),w={name:"AccountSettings",mixins:[a["a"],r["a"]],data(){return{dlg_deactivate:!1,loading:!1,user:null,all_countries:[],all_states:[],is_private:[],options_gender:["Male","Female","Prefer not to answer"]}},watch:{"user.country"(t,e){null!=e&&(this.user.state=""),this.all_states=[];let s=d["a"].findIndex((e=>e.countryName==t));if(s>=0){let t=d["a"][s].regions;for(let e=t.length-1;e>=0;e--)this.all_states.push(t[e].name);this.all_states.reverse()}}},components:{VueTelInput:o["a"],TopHeader:u["a"],SideNavProfile:h["a"],SureDialog:I["a"],Calendar:D},mounted(){this.userDetails()},methods:{...Object(c["b"])("user",["getProfileInfo","updateProfileInfo","deactivateAccount"]),...Object(c["b"])("auth",["logout","checkUniqueUser"]),toDeactivate(t){this.dlg_deactivate=!1,t&&this.deactivate()},checkUser(t,e){let s={key:t,value:e};if("username"==s.key&&s.value.length<5)return this.$revfunc.notification("Username must be minimum of 5 character."),void(this.user[t]=e);this.$q.loading.show(),this.checkUniqueUser(s).then((s=>{s.status&&(this.user[t]=e,this.$revfunc.notification(s.message)),this.$q.loading.hide()})).catch((t=>{}))},changeCheck(t,e){1==t.target.checked?this.user[e]=!0:this.user[e]=!1},userDetails(){this.loading=!0,this.$refs.bar.start(),this.getProfileInfo({user_id:this.$q.localStorage.getItem("rev_user").userId}).then((t=>{if(this.$refs.bar.stop(),t.status){for(let t=d["a"].length-1;t>=0;t--)this.all_countries.push(d["a"][t].countryName);this.all_countries.reverse(),this.user=t.results.user,this.user.dob&&(this.user.dob=l["a"].moment(this.user.dob).format("YYYY-MM-DD")),this.is_private=JSON.parse(t.results.user.private_col)}this.loading=!1})).catch((t=>{}))},onSubmit(){if(!this.isSubmitValidPhone(this.user.phone))return;this.loading=!0;let t={firstname:this.user.firstname,lastname:this.user.lastname,phone:this.user.phone,email:this.user.email,dob:this.user.dob?l["a"].moment(this.user.dob).format("MM/DD/YYYY"):this.user.dob,dial_code:this.user.dial_code,country:this.user.country,state:this.user.state,city:this.user.city,gender:this.user.gender,private_col:JSON.stringify(this.is_private)};this.updateProfileInfo(t).then((t=>{this.loading=!1,this.$revfunc.notification(t.message)})).catch((t=>{}))},deactivate(){this.deactivateAccount().then((t=>{t.status&&(this.$revfunc.notification("This account is deactivated."),this.logoutNow())})).catch((t=>{}))}}},_=w,k=(s("8a84"),s("7ea5")),E=s("0378"),O=s("8f8e"),T=s("ddd8"),Y=s("2c91"),L=s("eebe"),P=s.n(L),N=Object(M["a"])(_,i,n,!1,null,null,null);e["default"]=N.exports;P()(N,"components",{QAjaxBar:k["a"],QForm:E["a"],QCheckbox:O["a"],QSelect:T["a"],QSpace:Y["a"]})},cdeb:function(t,e,s){},d65a:function(t,e,s){}}]);